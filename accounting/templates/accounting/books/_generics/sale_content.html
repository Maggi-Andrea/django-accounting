{% load currency_filters format_filters %}

<div class="card">
  <div class="card-header">
    <h3 class="card-title">Content</h3>
  </div>
  <div class="card-body">
    <div class="d-flex flex-column">
      <div class="d-flex flex-column flex-sm-row justify-content-between">
        <div class="p-2">
          <div class="card">
            <div class="card-body">
              {% with client=object.from_client %}
              <h4 class="card-title">From: <a href="{{ client.get_absolute_url }}">{{ client }}</a></h4>
              <address>
                {{ client.address.full_address|linebreaksbr }}<br>
              </address>
              {% endwith %}
            </div> 
          </div>
        </div>
        <div class="p-2">
          <div class="card">
            <div class="card-body">
              {% with client=object.to_client %}
              <h4 class="card-title">To: <a href="{{ client.get_absolute_url }}">{{ client }}</a></h4>
              <address>
                {{ client.address.full_address|linebreaksbr }}<br>
              </address>
              {% endwith %}
            </div>
          </div>
        </div>
      </div>
      <div>
        <table class="table table-striped table-bordered">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Label</th>
              <th scope="col">Description</th>
              <th scope="col">Unit (excl. tax)</th>
              <th scope="col">Qt.</th>
              <th scope="col">Tax rate</th>
              <th scope="col" class="text-right">Amount</th>
            </tr>
          </thead>
          <tbody>
            {% for line in lines.all %}
            <tr>
              <td>{{ forloop.counter }}</td>
              <td>{{ line.label }}</td>
              <td>{{ line.description|linebreaks }}</td>
              <td>{{ line.unit_price_excl_tax|currency }}</td>
              <td>{{ line.quantity }}</td>
              <td>{{ line.tax_rate.rate|percentage }}</td>
              <td class="text-right">{{ line.line_price_excl_tax|currency }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div class="card-footer">
    <dl class="row m-0">
      <dt class="col-sm-1">Sub Total:</dt>
      <dd class="col-sm">{{object.total_excl_tax|currency }}</dd>
      <dd class="w-100 m-0 p-0"></dd>
      <dt class="col-sm-1">Tax:</dt>
      <dd class="col-sm">{{object.total_tax|currency }}</dd>
      <dd class="w-100 m-0 p-0"></dd>
      <dt class="col-sm-1">Total:</dt>
      <dd class="col-sm">{{object.total_incl_tax|currency }}</dd>
    </dl>
  </div>
</div>



